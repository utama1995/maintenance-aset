<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel - Maintenance Aset</title>

<style>

/* Background */
body{
margin:0;
font-family: Arial, Helvetica, sans-serif;
background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
min-height:100vh;
}

/* Container utama */
.container{
width:95%;
max-width:1200px;
margin:30px auto;
background:white;
border-radius:12px;
box-shadow:0 10px 25px rgba(0,0,0,0.3);
overflow:hidden;
}

/* Banner */
.banner{
height:140px;
background:url("Banner Utama.png") center center;
background-size:cover;
}

/* Header */
.header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px 20px;
background:#2c5364;
color:white;
}

.header h2{
margin:0;
}

.logout-btn{
background:#e74c3c;
border:none;
padding:8px 15px;
color:white;
border-radius:6px;
cursor:pointer;
}

.logout-btn:hover{
background:#c0392b;
}

/* Content */
.content{
padding:20px;
}

/* Table */
table{
width:100%;
border-collapse:collapse;
margin-top:15px;
}

th{
background:#2c5364;
color:white;
padding:10px;
text-align:left;
}

td{
padding:10px;
border-bottom:1px solid #ddd;
}

tr:hover{
background:#f2f2f2;
}

/* Status badge */
.status{
padding:4px 8px;
border-radius:4px;
color:white;
font-size:12px;
}

.waiting{
background:#f39c12;
}

.process{
background:#3498db;
}

.done{
background:#27ae60;
}

.footer{
text-align:center;
padding:15px;
font-size:12px;
color:#777;
}

</style>

</head>

<body>

<script>

/* Proteksi login */
const token = localStorage.getItem("token");

if(!token){

alert("Silakan login terlebih dahulu");

window.location.href="login.html";

}

</script>

<div class="container">

<div class="banner"></div>

<div class="header">

<h2>Admin Panel - Maintenance Aset</h2>

<button class="logout-btn" onclick="logout()">Logout</button>

</div>

<div class="content">

<h3>Daftar Laporan Maintenance Aset</h3>

<table id="tabel">

<thead>
<tr>
<th>Ticket ID</th>
<th>Cabang</th>
<th>Pelapor</th>
<th>Deskripsi</th>
<th>Status</th>
</tr>
</thead>

<tbody>

<tr>
<td colspan="5">Memuat data...</td>
</tr>

</tbody>

</table>

</div>

<div class="footer">
Maintenance Asset Management System
</div>

</div>

<script>

const API_URL =
"https://script.google.com/macros/s/AKfycbx8e494pqAPOR2QnjJrD-BlPrK2MvyZ86MAqvi9IEe_jdTaj5S8Nxcjbb-MP0NDkSLodw/exec";


/* Logout */
function logout(){

localStorage.removeItem("token");

window.location.href="login.html";

}


/* Load data */
async function loadData(){

try{

const res = await fetch(API_URL+"?action=list");

const data = await res.json();

console.log(data);

const tbody =
document.querySelector("#tabel tbody");

tbody.innerHTML="";

data.forEach(row=>{

tbody.innerHTML+=`
<tr>
<td>${row.id}</td>
<td>${row.tanggal}</td>
<td>${row.nama}</td>
<td>${row.aset}</td>
<td>${row.status}</td>
</tr>
`;

});

}catch(err){

document.querySelector("#tabel tbody").innerHTML=
"<tr><td colspan='5'>Gagal memuat data</td></tr>";

}

}

/* Load saat halaman dibuka */
loadData();

</script>

</body>
</html>
